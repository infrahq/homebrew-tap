# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Infra < Formula
  desc "Infra"
  homepage "https://infrahq.com"
  version "0.20.0"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/infrahq/infra/releases/download/v0.20.0/infra_0.20.0_darwin_arm64.zip"
      sha256 "af8d6a1abaed2b62c22d18692caf057f76d958c21d0876beaf19c5a7269bdf68"

      def install
        bin.install "infra"
        output = Utils.popen_read("#{bin}/infra completion bash")
        (bash_completion/"infra").write output
        output = Utils.popen_read("#{bin}/infra completion zsh")
        (zsh_completion/"_infra").write output
        output = Utils.popen_read("#{bin}/infra completion fish")
        (fish_completion/"infra.fish").write output
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/infrahq/infra/releases/download/v0.20.0/infra_0.20.0_darwin_x86_64.zip"
      sha256 "c89262291b30bad8b5bd9111395ac135af2ed32201c0bc8de152b7a95fc1452d"

      def install
        bin.install "infra"
        output = Utils.popen_read("#{bin}/infra completion bash")
        (bash_completion/"infra").write output
        output = Utils.popen_read("#{bin}/infra completion zsh")
        (zsh_completion/"_infra").write output
        output = Utils.popen_read("#{bin}/infra completion fish")
        (fish_completion/"infra.fish").write output
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/infrahq/infra/releases/download/v0.20.0/infra_0.20.0_linux_x86_64.zip"
      sha256 "29a2ac2e59a1547fc93198306b50a4defcd11383e2f1bd6322536d4e4ebf1776"

      def install
        bin.install "infra"
        output = Utils.popen_read("#{bin}/infra completion bash")
        (bash_completion/"infra").write output
        output = Utils.popen_read("#{bin}/infra completion zsh")
        (zsh_completion/"_infra").write output
        output = Utils.popen_read("#{bin}/infra completion fish")
        (fish_completion/"infra.fish").write output
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/infrahq/infra/releases/download/v0.20.0/infra_0.20.0_linux_arm64.zip"
      sha256 "8512aaa4d7aa760686b0da1180bb83d390da6bcb7712557a05001ce610b2d10b"

      def install
        bin.install "infra"
        output = Utils.popen_read("#{bin}/infra completion bash")
        (bash_completion/"infra").write output
        output = Utils.popen_read("#{bin}/infra completion zsh")
        (zsh_completion/"_infra").write output
        output = Utils.popen_read("#{bin}/infra completion fish")
        (fish_completion/"infra.fish").write output
      end
    end
  end
end
